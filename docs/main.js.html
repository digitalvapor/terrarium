<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: main.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: main.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// raw data
import rawTaxonomyData from './taxonomy';
import rawPlantData from './plants.json';

// classes
import PlantCollection from './plant_collection';
import TaxonomicTree from './taxonomic_tree';

// dependencies
import ko from 'knockout';
window.ko = ko;
ko.options.useOnlyNativeEvents = true;

/**
 * the primary terrarium app class
 * @class TerrariumApp
 */
class TerrariumApp {
  constructor() {
    // based on the plants i have in my collection that are _alive_, build the base PlantCollection.
    this.plantCollection = new PlantCollection(rawPlantData);
    console.log(this.plantCollection.plants[0]);
    // this first builds from the data we already have
    this.taxonomyTree = new TaxonomicTree(rawTaxonomyData);

    // TODO: move into PlantCollection?
    this.plantCollection.plants.forEach((plant) => {
      const taxonInfo = this.taxonomyTree.taxonInfoLookup()[plant.taxon]

      Object.assign(plant, taxonInfo);
    });
    console.log(this.plantCollection.plants[0]);

    // placeholder plant for the add-plant inputs
    this.temporaryPlant = ko.observable({
      id: null,
      taxon: null,
    });

    this.temporaryPlant.subscribe((newPlant) => {
      console.log(newPlant);
      // only suggest an id if nothing is already written
      if (newPlant.id !== null)
        return;

      this.temporaryPlant({
        id: this.suggestPlantId(newPlant.taxon),
        taxon: newPlant.taxon,
      })
    });
  }

  suggestPlantId(taxon) {
    const databaseId = this.taxonomyTree.getPreferredDatabaseId(taxon);
    const n = this.plantCollection.numberOfTaxon() - 1;
    const year = new Date().getFullYear();
    return `${databaseId}_${year}_${n}`;
  }
}

ko.applyBindings(new TerrariumApp());
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Organism.html">Organism</a></li><li><a href="TerrariumApp.html">TerrariumApp</a></li></ul><h3>Global</h3><ul><li><a href="global.html#getPreferredDatabaseId">getPreferredDatabaseId</a></li><li><a href="global.html#rawData">rawData</a></li><li><a href="global.html#SAVE_STATE_ICONS">SAVE_STATE_ICONS</a></li><li><a href="global.html#validTaxons">validTaxons</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sat Dec 09 2017 14:58:37 GMT-0800 (PST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
